!function(a){function b(){c(),d()}function c(){var b=[];a("[plan_id]").each(function(){var c=a(this).attr("plan_id");b.push(c)}),localStorage.plansOrder=JSON.stringify(b)}function d(){var b=[];f.each(function(){var c=a(this).attr("plan_id");1!=a(this).css("opacity")&&b.push(c)}),localStorage.plansOpacity=JSON.stringify(b)}if(a("#content").length){var e,f=a("[plan_id]"),g=.4;if(f.append("<div class='plan-icons'><div class='plan-icon plan-changeOpacity'></div><div class='plan-icon plan-moveHandle'></div></div>").wrapAll("<div id='sortablePlans'></div>"),a(".plan-changeOpacity").on("click",function(){var c=a(this).closest("[plan_id]");1==c.css("opacity")?c.css("opacity",g):c.css("opacity",1),b()}),e=a("#sortablePlans"),e.sortable({axis:"y",tolerance:"pointer",handle:".plan-moveHandle",stop:b}),localStorage.plansOrder)for(var h=JSON.parse(localStorage.plansOrder),i=0;i<h.length;i++)f.each(function(){a(this).attr("plan_id")==h[i]&&a(this).detach().appendTo(e)});if(localStorage.plansOpacity)for(var j=JSON.parse(localStorage.plansOpacity),i=0;i<j.length;i++)f.filter("[plan_id='"+j[i]+"']").css("opacity",g);b()}}(jQuery);